{% extends 'base.html' %}
{% block content %}
<div class="mt-5">

  <div class="">
    <h1>어떤 빨래를 하시나요?</h1>
  </div>
  <form id="select-form">
    {% csrf_token %}

    <h4>빨래 색상</h4>
    <div class="form-check form-check-inline">
      <input class="form-check-input" type="radio" id="white" name="color">
      <label class="form-check-label" for="white">흰색</label>
    </div>

    <div class="form-check form-check-inline">
      <input class="form-check-input" type="radio" id="black" name="color">
      <label class="form-check-label" for="black">검은색</label>
    </div>

    <div class="form-check form-check-inline">
      <input class="form-check-input" type="radio" id="other" name="color">
      <label class="form-check-label" for="other">다른색</label>
    </div>
  </form>
  
  <form id="select-form">
    {% csrf_token %}

    <h4>세탁 모드</h4>
    <div class="form-check form-check-inline">
      <input class="form-check-input" type="radio" id="fast" name="runtime">
      <label class="form-check-label" for="fast">빠름</label>
    </div>

    <div class="form-check form-check-inline">
      <input class="form-check-input" type="radio" id="normal" name="runtime">
      <label class="form-check-label" for="normal">보통</label>
    </div>

    <div class="form-check form-check-inline">
      <input class="form-check-input" type="radio" id="slow" name="runtime">
      <label class="form-check-label" for="slow">느림</label>
    </div>
  </form>

</div>


<br>
<br>
<br>


{% comment %} 추천 런드리 무비 {% endcomment %}
<h1 class="text-center">추천 런드리무비</h1>

<div class="show_movies d-flex justify-content-center">
  
  <div class="row mx-auto" id="movie_list">
    {% comment %}  highscore_serializer 이거를 바꿔야 함 어떻게???? {% endcomment %}
    {% if !movie_list %}
    {% for movies in highscore_serializer %}
    {% endif %}
    <div class="mb-4 col-12 col-md-6 col-lg-4">
      <div class="card text-center" style="min-width: 18rem;">
        <a href=""><img src="https://image.tmdb.org/t/p/w500/{{ movies.poster_path }}" class="img-fluid"></a>
        <div class="card-body">
          <h4>{{ movies.title }}</h4>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
</div>

{% endblock content %}
{% block script %}
<script>
  let print_movies = document.querySelector('highscore_serializer')

  document.addEventListener('input', (e) => {
    e.preventDefault()
    const csrftoken = document.querySelector('[name=csrfmiddlewaretoken]').value

    axios({
      method:'post',
      headers: {'X-CSRFToken': csrftoken},
      url: `http://127.0.0.1:8000/movies/allmovie/`,
    })
      .then(res => {

        if (e.target.getAttribute('name') === 'color') {
          let color_movie = e.target.getAttribute('id')
    
          if (color_movie === 'white') {
            console.log(res.data.white_movie_serializer)
            print_movies.innerText = res.data.white_movie_serializer
          }
        }
      })
    
  })
  
</script>
{% endblock script %}